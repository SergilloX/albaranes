function convertDateFormat(date) {
  const [day, month, year] = date.split('/');
  return `${year}-${month}-${day}`;
}

function convertDecimalFormat(decimal) {
  return decimal.replace('.', '').replace(',', '.');
}

document.addEventListener('DOMContentLoaded', function() {
  const gastos = [
    { concepto: "DIAZ HERNANDEZ, ONOFRE", fecha: "20/03/2024", importe: "43,58" },
    { concepto: "MOLINA MARTINEZ, SERGIO", fecha: "14/05/2024", importe: "363,00" },
    { concepto: "IDALGO HERNANDEZ, FRANCISCO JA", fecha: "25/01/2024", importe: "1.936,00" },
    { concepto: "YUKSEL SEMILLAS SA", fecha: "15/04/2024", importe: "15.950,00" },
    { concepto: "CAIXABANK S.A.", fecha: "30/04/2024", importe: "3.127,66" },
    { concepto: "CEDIPSA", fecha: "02/01/2024", importe: "76,01" },
    { concepto: "CEDIPSA", fecha: "25/01/2024", importe: "75,75" },
    { concepto: "CEDIPSA", fecha: "21/02/2024", importe: "80,01" },
    { concepto: "CEDIPSA", fecha: "11/03/2024", importe: "120,54" },
    { concepto: "CEDIPSA", fecha: "30/03/2024", importe: "100,61" },
    { concepto: "BANCO BILBAO VIZCAYA ARG. S.A.", fecha: "31/03/2024", importe: "7.356,34" },
    { concepto: "EURO DEPOT ESPAÑA, S.A.U.", fecha: "20/05/2024", importe: "43,75" },
    { concepto: "ENDESA ENERGIA, S.A. UNIPERSON", fecha: "23/01/2024", importe: "146,21" },
    { concepto: "ENDESA ENERGIA, S.A. UNIPERSON", fecha: "01/04/2024", importe: "146,21" },
    { concepto: "ENDESA ENERGIA, S.A. UNIPERSON", fecha: "01/04/2024", importe: "131,72" },
    { concepto: "ENDESA ENERGIA, S.A. UNIPERSON", fecha: "20/04/2024", importe: "159,82" },
    { concepto: "ENDESA ENERGIA, S.A. UNIPERSON", fecha: "22/05/2024", importe: "137,31" },
    { concepto: "ENDESA ENERGIA, S.A. UNIPERSON", fecha: "21/06/2024", importe: "131,50" },
    { concepto: "SEARCH ENGINE BUSINESS, S.L.", fecha: "18/01/2024", importe: "199,00" },
    { concepto: "GUIVARTO AGRICOLA, S.L.", fecha: "01/01/2024", importe: "289,14" },
    { concepto: "GUIVARTO AGRICOLA, S.L.", fecha: "12/02/2024", importe: "64,68" },
    { concepto: "GUIVARTO AGRICOLA, S.L.", fecha: "12/04/2024", importe: "495,00" },
    { concepto: "GUIVARTO AGRICOLA, S.L.", fecha: "28/06/2024", importe: "116,58" },
    { concepto: "GUIVARTO AGRICOLA, S.L.", fecha: "28/06/2024", importe: "3.431,38" },
    { concepto: "GUIVARTO AGRICOLA, S.L.", fecha: "22/07/2024", importe: "180,71" },
    { concepto: "SUCESORES DE JUAN RUIZ IBAÑEZ", fecha: "04/06/2024", importe: "36,55" },
    { concepto: "LUPION Y RODRIGUEZ, S.L.", fecha: "09/01/2024", importe: "268,10" },
    { concepto: "LUPION Y RODRIGUEZ, S.L.", fecha: "17/01/2024", importe: "419,45" },
    { concepto: "RIEGOS P.G.Y., S.L.", fecha: "26/03/2024", importe: "22,51" },
    { concepto: "BIPACOM, S.L.", fecha: "26/04/2024", importe: "49,89" },
    { concepto: "BIPACOM, S.L.", fecha: "08/05/2024", importe: "20,32" },
    { concepto: "BIPACOM, S.L.", fecha: "14/05/2024", importe: "26,18" },
    { concepto: "BIPACOM, S.L.", fecha: "28/05/2024", importe: "377,52" },
    { concepto: "BIPACOM, S.L.", fecha: "17/06/2024", importe: "3,96" },
    { concepto: "BIPACOM, S.L.", fecha: "17/06/2024", importe: "11,88" },
    { concepto: "BIPACOM, S.L.", fecha: "13/06/2024", importe: "13,27" },
    { concepto: "BIPACOM, S.L.", fecha: "18/06/2024", importe: "25,00" },
    { concepto: "HORTICAMPO, S.L.", fecha: "05/01/2024", importe: "748,00" },
    { concepto: "ALMESU, S.L.", fecha: "08/05/2024", importe: "33,07" },
    { concepto: "ALMESU, S.L.", fecha: "24/05/2024", importe: "8,06" },
    { concepto: "FIGESUS, S.L.", fecha: "10/01/2024", importe: "108,90" },
    { concepto: "FIGESUS, S.L.", fecha: "03/02/2024", importe: "108,90" },
    { concepto: "FIGESUS, S.L.", fecha: "04/03/2024", importe: "108,90" },
    { concepto: "FIGESUS, S.L.", fecha: "02/04/2024", importe: "108,90" },
    { concepto: "FIGESUS, S.L.", fecha: "02/05/2024", importe: "108,90" },
    { concepto: "FIGESUS, S.L.", fecha: "04/06/2024", importe: "133,10" },
    { concepto: "ANFRAGAL S.L.", fecha: "14/02/2024", importe: "3.428,01" },
    { concepto: "HORTALAN MED SL", fecha: "31/01/2024", importe: "1.703,57" },
    { concepto: "HORTALAN MED SL", fecha: "31/01/2024", importe: "315,48" },
    { concepto: "HORTALAN MED SL", fecha: "29/02/2024", importe: "2.468,40" },
    { concepto: "HORTALAN MED SL", fecha: "29/02/2024", importe: "1.392,37" },
    { concepto: "HORTALAN MED SL", fecha: "29/02/2024", importe: "2.485,56" },
    { concepto: "HORTALAN MED SL", fecha: "30/03/2024", importe: "5.647,49" },
    { concepto: "HORTALAN MED SL", fecha: "01/04/2024", importe: "1.573,56" },
    { concepto: "HORTALAN MED SL", fecha: "30/04/2024", importe: "1.063,02" },
    { concepto: "HORTALAN MED SL", fecha: "30/04/2024", importe: "2.408,79" },
    { concepto: "HORTALAN MED SL", fecha: "15/05/2024", importe: "121,87" },
    { concepto: "HORTALAN MED SL", fecha: "15/05/2024", importe: "3.008,59" },
    { concepto: "SUMINISTROS EDIFIKA, S.L.U.", fecha: "02/05/2024", importe: "55,01" },
    { concepto: "FITOCAÑADA, S.L.", fecha: "01/03/2024", importe: "1.413,69" },
    { concepto: "FITOCAÑADA, S.L.", fecha: "12/03/2024", importe: "336,60" },
    { concepto: "FITOCAÑADA, S.L.", fecha: "11/04/2024", importe: "860,31" },
    { concepto: "EXCAVACIONES HNOS.BENAVIDES SL", fecha: "21/02/2024", importe: "2.583,35" },
    { concepto: "LIROSAN COMUNICACIONES, S.L.", fecha: "06/02/2024", importe: "19,90" },
    { concepto: "LA BOLETINA MAT. DE CONST. S.L", fecha: "25/04/2024", importe: "38,78" },
    { concepto: "LA BOLETINA MAT. DE CONST. S.L", fecha: "04/05/2024", importe: "332,58" },
    { concepto: "LA BOLETINA MAT. DE CONST. S.L", fecha: "15/05/2024", importe: "102,67" },
    { concepto: "LA BOLETINA MAT. DE CONST. S.L", fecha: "22/05/2024", importe: "12,10" },
    { concepto: "LA BOLETINA MAT. DE CONST. S.L", fecha: "29/05/2024", importe: "7,26" },
    { concepto: "LA BOLETINA MAT. DE CONST. S.L", fecha: "30/05/2024", importe: "11,50" },
    { concepto: "LA BOLETINA MAT. DE CONST. S.L", fecha: "13/06/2024", importe: "7,26" },
    { concepto: "MQFERTIRRIGACION, S.L", fecha: "09/01/2024", importe: "226,42" },
    { concepto: "AGRONEVADA S.L.", fecha: "01/01/2024", importe: "940,50" },
    { concepto: "AGRONEVADA S.L.", fecha: "17/06/2024", importe: "1.210,00" },
    { concepto: "AGRONEVADA S.L.", fecha: "05/04/2024", importe: "1.533,07" },
    { concepto: "E.S. ALVAMAR", fecha: "30/06/2024", importe: "24,20" },
    { concepto: "LASPOMILLA-FERRETERIA S.L.U.", fecha: "20/06/2024", importe: "398,40" },
    { concepto: "LASPOMILLA-FERRETERIA S.L.U.", fecha: "21/06/2024", importe: "22,99" },
    { concepto: "IKOS ADVANCED SL", fecha: "26/01/2024", importe: "1.149,50" },
    { concepto: "AGROSISTEMAS DS, S.L", fecha: "01/01/2024", importe: "6.292,00" },
    { concepto: "AGROSISTEMAS DS, S.L", fecha: "01/01/2024", importe: "76,23" },
    { concepto: "AGROSISTEMAS DS, S.L", fecha: "01/01/2024", importe: "-118,23" },
    { concepto: "AGROSISTEMAS DS, S.L", fecha: "27/02/2024", importe: "979,94" },
    { concepto: "AGROSISTEMAS DS, S.L", fecha: "27/02/2024", importe: "-205,36" },
    { concepto: "AGROSISTEMAS DS, S.L", fecha: "06/03/2024", importe: "3.900,53" },
    { concepto: "AGROSISTEMAS DS, S.L", fecha: "06/03/2024", importe: "-23,70" },
    { concepto: "AGROSISTEMAS DS, S.L", fecha: "08/03/2024", importe: "68,97" },
    { concepto: "AGROSISTEMAS DS, S.L", fecha: "01/04/2024", importe: "823,10" },
    { concepto: "AGROSISTEMAS DS, S.L", fecha: "19/04/2024", importe: "230,88" },
    { concepto: "MSS SEIDOR, S.L.", fecha: "24/01/2024", importe: "1.815,00" },
    { concepto: "MSS SEIDOR, S.L.", fecha: "24/01/2024", importe: "302,50" },
    { concepto: "GASILUZ ECO ENERCIA, S.L.", fecha: "10/01/2024", importe: "334,40" },
    { concepto: "GASILUZ ECO ENERCIA, S.L.", fecha: "14/02/2024", importe: "440,54" },
    { concepto: "GASILUZ ECO ENERCIA, S.L.", fecha: "14/03/2024", importe: "309,32" },
    { concepto: "GASILUZ ECO ENERCIA, S.L.", fecha: "11/04/2024", importe: "295,17" },
    { concepto: "GASILUZ ECO ENERCIA, S.L.", fecha: "15/05/2024", importe: "137,63" },
    { concepto: "GASILUZ ECO ENERCIA, S.L.", fecha: "12/06/2024", importe: "97,21" },
    { concepto: "GASILUZ ECO ENERCIA, S.L.", fecha: "11/07/2024", importe: "94,96" },
    { concepto: "SUMINISTROS MED. JMEDIS SL", fecha: "11/03/2024", importe: "36,85" },
    { concepto: "GONZALEZ LOPEZ, C.B.", fecha: "15/05/2024", importe: "17,65" },
    { concepto: "GONZALEZ LOPEZ, C.B.", fecha: "15/05/2024", importe: "39,53" },
    { concepto: "GONZALEZ LOPEZ, C.B.", fecha: "22/05/2024", importe: "25,10" },
    { concepto: "GONZALEZ LOPEZ, C.B.", fecha: "29/05/2024", importe: "13,98" },
    { concepto: "COOP. PROV. AGRARIA Y GANAD. S", fecha: "09/02/2024", importe: "371,71" },
    { concepto: "COOP. PROV. AGRARIA Y GANAD. S", fecha: "09/02/2024", importe: "56,75" },
    { concepto: "COOP. PROV. AGRARIA Y GANAD. S", fecha: "04/03/2024", importe: "2.020,37" },
    { concepto: "COOP. PROV. AGRARIA Y GANAD. S", fecha: "04/03/2024", importe: "10,55" },
    { concepto: "COOP. PROV. AGRARIA Y GANAD. S", fecha: "04/03/2024", importe: "165,81" },
    { concepto: "COOP. PROV. AGRARIA Y GANAD. S", fecha: "04/03/2024", importe: "46,63" },
    { concepto: "COOP. PROV. AGRARIA Y GANAD. S", fecha: "05/03/2024", importe: "3,99" },
    { concepto: "COOP. PROV. AGRARIA Y GANAD. S", fecha: "05/03/2024", importe: "71,69" },
    { concepto: "COOP. PROV. AGRARIA Y GANAD. S", fecha: "11/03/2024", importe: "5,10" },
    { concepto: "COOP. PROV. AGRARIA Y GANAD. S", fecha: "15/03/2024", importe: "26,74" },
    { concepto: "COOP. PROV. AGRARIA Y GANAD. S", fecha: "15/03/2024", importe: "86,52" },
    { concepto: "COOP. PROV. AGRARIA Y GANAD. S", fecha: "02/04/2024", importe: "69,72" },
    { concepto: "COOP. PROV. AGRARIA Y GANAD. S", fecha: "02/04/2024", importe: "54,91" },
    { concepto: "COOP. PROV. AGRARIA Y GANAD. S", fecha: "03/04/2024", importe: "12,54" },
    { concepto: "COOP. PROV. AGRARIA Y GANAD. S", fecha: "03/04/2024", importe: "73,22" },
    { concepto: "COOP. PROV. AGRARIA Y GANAD. S", fecha: "08/04/2024", importe: "231,66" },
    { concepto: "COOP. PROV. AGRARIA Y GANAD. S", fecha: "08/05/2024", importe: "428,64" },
    { concepto: "COOP. PROV. AGRARIA Y GANAD. S", fecha: "08/05/2024", importe: "296,08" },
    { concepto: "LAS CUATRO VEGAS DE ALMERIA", fecha: "01/01/2024", importe: "4.252,79" },
    { concepto: "LAS CUATRO VEGAS DE ALMERIA", fecha: "01/01/2024", importe: "618,59" },
    { concepto: "LAS CUATRO VEGAS DE ALMERIA", fecha: "01/04/2024", importe: "612,79" },
    { concepto: "LAS CUATRO VEGAS DE ALMERIA", fecha: "01/04/2024", importe: "4.738,60" },
    { concepto: "LAS CUATRO VEGAS DE ALMERIA", fecha: "10/05/2024", importe: "518,05" },
    { concepto: "LAS CUATRO VEGAS DE ALMERIA", fecha: "10/05/2024", importe: "6.479,41" },
    { concepto: "LAS CUATRO VEGAS DE ALMERIA", fecha: "09/07/2024", importe: "933,91" },
    { concepto: "LAS CUATRO VEGAS DE ALMERIA", fecha: "19/06/2024", importe: "25.694,62" },
    { concepto: "AMAZON SERVICES EUROPE S.A.R.L", fecha: "28/02/2024", importe: "139,99" },
    { concepto: "AMAZON SERVICES EUROPE S.A.R.L", fecha: "10/03/2024", importe: "19,66" },
    { concepto: "AMAZON SERVICES EUROPE S.A.R.L", fecha: "16/03/2024", importe: "17,17" },
    { concepto: "AMAZON EU S.A.R.L.", fecha: "05/03/2024", importe: "34,99" },
    { concepto: "AMAZON EU S.A.R.L", fecha: "27/05/2024", importe: "80,01" },
    { concepto: "AMAZON EU S.A.R.L", fecha: "04/06/2024", importe: "129,00" },
    { concepto: "AMAZON EU S.A.R.L", fecha: "10/06/2024", importe: "85,90" },
    { concepto: "TES. GENERAL SEGURIDAD SOCIAL", fecha: "31/01/2024", importe: "430,40" },
    { concepto: "TES. GENERAL SEGURIDAD SOCIAL", fecha: "29/02/2024", importe: "430,40" },
    { concepto: "TES. GENERAL SEGURIDAD SOCIAL", fecha: "31/03/2024", importe: "430,40" },
    { concepto: "AMAZON EU SLRL ESPAÑA", fecha: "09/03/2024", importe: "9,25" },
    { concepto: "VODAFONE", fecha: "13/02/2024", importe: "21,80" },
    { concepto: "VODAFONE", fecha: "10/06/2024", importe: "27,00" },
    { concepto: "VODAFONE", fecha: "12/04/2024", importe: "52,01" },
    { concepto: "VODAFONE", fecha: "14/05/2024", importe: "33,67" },
    { concepto: "VODAFONE", fecha: "13/03/2024", importe: "52,01" },
    { concepto: "VODAFONE", fecha: "10/07/2024", importe: "27,00" },
    { concepto: "MARIA DEL MAR HARO MUÑOZ", fecha: "30/04/2024", importe: "1.272,00" },
    { concepto: "MARIA DEL MAR HARO MUÑOZ", fecha: "30/06/2024", importe: "1.272,00" },
    { concepto: "MARIA DEL MAR HARO MUÑOZ", fecha: "30/05/2024", importe: "1.272,00" },
    { concepto: "AGROIBERICA INGENIEROS", fecha: "23/01/2024", importe: "60,00" },
    { concepto: "MOVISTAR", fecha: "01/05/2024", importe: "30,22" },
    { concepto: "MOVISTAR", fecha: "01/05/2024", importe: "20,87" },
    { concepto: "MOVISTAR", fecha: "01/06/2024", importe: "21,68" },
    { concepto: "MOVISTAR", fecha: "01/06/2024", importe: "37,84" },
    { concepto: "MOVISTAR", fecha: "01/07/2024", importe: "25,45" },
    { concepto: "SIMYO", fecha: "09/07/2024", importe: "9,00" }
  ];

  const formattedGastos = gastos.map(gasto => ({
    concepto: gasto.concepto,
    fecha: convertDateFormat(gasto.fecha),
    importe: convertDecimalFormat(gasto.importe)
  }));

  fetch('/api/gastos/multiple', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(formattedGastos)
  })
  .then(response => response.json())
  .then(data => {
    console.log(data.message);
  })
  .catch(error => {
    console.error('Error:', error);
  });
});
